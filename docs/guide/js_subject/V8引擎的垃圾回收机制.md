# V8 引擎的垃圾回收机制

## 前言

前端开发工程师应该都有听说过 V8 引擎，它是一种 JavaScript 引擎的实现，所以也可称它为 V8 JavaScript 引擎。

那什么是 JavaScript 引擎呢？我这里贴出[维基百科](https://zh.wikipedia.org/wiki/JavaScript%E5%BC%95%E6%93%8E)的解释：
> JavaScript 引擎是一个专门处理 JavaScript 脚本的虚拟机，一般会附带在网页浏览器之中。

在日常开发中，虽然我们遇到内存溢出而导致程序崩溃的情况比较少，有部分功劳是 V8 引擎自动帮我们管理了内存，可以让我们更加专注的开发业务，但是代码编写的不够严谨也是很容易引起内存泄露，而了解 V8 引擎垃圾回收背后的机制，至少可以增强我们在开发过程中对减少内存占用，避免内存泄漏的主观意识，因此我们今天来聊聊 V8 引擎垃圾回收机制。

## 为什么需要垃圾回收

1. 预防内存泄露导致程序性能下降。
2. V8 引擎的内存限制。（64位系统约 1.4GB，32位系统约 0.7GB）

其中第二点内存被限制的原因是：
1. 起初是给浏览器设计的，JavaScript 作为浏览器的脚本语言，它的主要用途是与用户交互以及操作 DOM，那么这也决定了其作为单线程的本质，单线程意味着执行的代码必须按顺序执行，在同一时间只能处理一个任务，所以不太可能出现使用大量内存的场景。
2. 垃圾回收本身可以看作一种同步任务，它的执行是会阻碍用户的操作体验，如果内存使用过高，那么必然会导致垃圾回收的过程缓慢，浏览器也就越长时间得不到响应。

## 垃圾回收策略

## 参考文献

[一文搞懂V8引擎的垃圾回收](https://juejin.cn/post/6844904016325902344)
[重点参考1-中文](http://newhtml.net/v8-garbage-collection/)
[重点参考1-英文](http://www.jayconrod.com/posts/55/a-tour-of-v8-garbage-collection)
[参考2](https://segmentfault.com/a/1190000025129635)
[参考3](https://segmentfault.com/a/1190000000440270)